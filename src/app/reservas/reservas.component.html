<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card shadow-lg">
        <div class="card-header text-center">
          <h3>{{ title }}</h3>
        </div>
        <div class="card-body">
          <form (ngSubmit)="onSubmit()" #reservaForm="ngForm">
            <!-- Si no estamos en modo cancelación, mostramos el formulario de reserva -->
            <div *ngIf="!cancelando">
              <div class="form-group">
                <label for="nombre">Nombre</label>
                <input type="text" id="nombre" class="form-control" [(ngModel)]="nombre" name="nombre" required>
              </div>

              <div class="form-group mt-3">
                <label for="fecha">Fecha</label>
                <input type="date" id="fecha" class="form-control" [(ngModel)]="fecha" name="fecha" required>
              </div>

              <div class="form-group mt-3">
                <label for="hora">Hora</label>
                <input type="time" id="hora" class="form-control" [(ngModel)]="hora" name="hora" required>
              </div>

              <div class="form-group mt-3">
                <label for="numeroPago">Número de pago</label>
                <input type="text" id="numeroPago" class="form-control" [(ngModel)]="numeroPago" name="numeroPago" required>
              </div>

              <button type="submit" class="btn btn-primary mt-3 w-100" [disabled]="!reservaForm.valid">Reservar mesa</button>
            </div>

            <!-- Mensaje de error si el número de pago no es válido -->
            <div *ngIf="errorMessage" class="alert alert-danger mt-3">
              {{ errorMessage }}
            </div>

            <!-- Si estamos en modo cancelación, mostramos el formulario de cancelación -->
            <div *ngIf="cancelando">
              <div class="form-group mt-3">
                <label for="numeroPagoCancelacion">Número de pago para cancelar</label>
                <input type="text" id="numeroPagoCancelacion" class="form-control" [(ngModel)]="numeroPago" name="numeroPagoCancelacion" required>
              </div>

              <button type="button" class="btn btn-danger mt-3 w-100" (click)="confirmarCancelacion()">Confirmar cancelación</button>

              <!-- Mensaje de error si la cancelación falla -->
              <div *ngIf="errorCancelacion" class="alert alert-danger mt-3">
                {{ errorCancelacion }}
              </div>
            </div>

            <!-- Botón para cancelar reserva -->
            <div class="mt-3">
              <button class="btn btn-warning w-100" (click)="cancelarReserva()" *ngIf="!cancelando">Cancelar Reserva</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
